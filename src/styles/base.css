@tailwind base;
@tailwind components;
@tailwind utilities;

html, body, #root { height: 100%; }

.maplibregl-canvas { outline: none; }

:root {
  --panel-width: 340px;
}

@media (max-width: 640px) {
  :root { --panel-width: 300px; }
}

/* Support modern dynamic viewport units for mobile address bar collapse */
@supports (height: 100dvh) {
  .h-dvh { height: 100dvh; }
  .max-h-dvh { max-height: 100dvh; }
}

/* Fallback if 100dvh unsupported */
.h-dvh { height: 100vh; }
.max-h-dvh { max-height: 100vh; }

@keyframes pulse-ring {
  0% {
    transform: scale(0.6);
    opacity: 0.7;
  }
  70% {
    transform: scale(2.2);
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}

.pulse-marker {
  position: relative;
}

.pulse-marker:after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 8px;
  height: 8px;
  margin: -4px;
  border-radius: 9999px;
  background: rgba(34, 197, 94, 0.6);
  animation: pulse-ring 1.7s linear infinite;
}

.progress-bar {
  height: 6px;
  background: #1e293b;
  border-radius: 4px;
  overflow: hidden;
}

.progress-bar span {
  display: block;
  height: 100%;
  background: linear-gradient(90deg, #16a34a, #f59e0b 60%, #dc2626);
  transition: width 0.4s ease;
}

/* Improve MapLibre popup contrast */
.maplibregl-popup-content {
  background: #ffffff;
  color: #1e293b;
  font-size: 12px;
  line-height: 1.2;
  padding: 6px 8px;
  border: 1px solid #334155;
  box-shadow: 0 2px 6px rgba(0,0,0,0.35);
}
.maplibregl-popup-content strong { color: #0f172a; font-weight: 600; }
.maplibregl-popup-tip { border-top-color: #ffffff !important; }

/* City markers (showAllLocations HTML overlay) */
.city-marker {
  position: relative;
  display: flex;
  align-items: center;
  gap: 4px;
  transform: translate(-50%, -50%);
  font-size: 11px;
  font-weight: 500;
  pointer-events: auto;
  color: #e2e8f0;
  text-shadow: 0 0 2px rgba(15,23,42,0.9);
  user-select: none;
}
.city-marker .dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #3b82f6;
  border: 1px solid #0f172a;
  box-shadow: 0 0 0 1px rgba(0,0,0,0.25);
}
.city-marker.hq .dot { background: #16a34a; }
.city-marker .label-bg {
  padding: 1px 4px 2px;
  background: rgba(15,23,42,0.75);
  border: 1px solid rgba(51,65,85,0.8);
  border-radius: 4px;
  line-height: 1.1;
}
